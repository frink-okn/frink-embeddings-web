<div id="errors" role="alert" hx-swap-oob="true">
{% if error %}{{ error }}{% endif %}
</div>

{% if results and results|length > 0 %}
<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Node URI</th>
      <th>Match Score</th>
    </tr>
  </thead>
  <tbody>
  {% for r in results %}
    <tr>
      <td>{{ r.payload.label or "" }}</td>
      <td>
        {% if r.payload.iri %}
          <a href="{{ r.payload.iri }}">{{ r.payload.iri }}</a>
        {% else %}
          {{ "" }}
        {% endif %}
      </td>
      <td>
        {% if r.score is not none %}
          {{ '%.4f' | format(r.score) }}
        {% else %}
          {{ "" }}
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<div class="pagination">
  <button
    class="submit-req"
    hx-post="{{ url_for('web.post_query_view') }}"
    hx-target="#results"
    hx-target-error="#errors"
    hx-disabled-elt=".submit-req"
    hx-indicator="form"
    hx-vals='{ "offset": {{ query.offset - query.limit if query.offset >= query.limit else 0 }} }'
    {% if query.offset == 0 %}disabled{% endif %}
  >
    Prev
  </button>
  <button
    class="submit-req"
    hx-post="{{ url_for('web.post_query_view') }}"
    hx-target="#results"
    hx-target-error="#errors"
    hx-disabled-elt=".submit-req"
    hx-indicator="form"
    hx-vals='{ "offset": {{ query.offset + query.limit }} }'
  >
    Next
  </button>
</div>
{% else %}
<p>No results.</p>
{% endif %}
